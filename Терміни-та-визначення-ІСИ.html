<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∞–º–æ—Å—Ç—ñ–π–Ω–∞ —Ä–æ–±–æ—Ç–∞: –¢–µ—Ä–º—ñ–Ω–∏ —Ç–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ü–°–ò</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --secondary: #06b6d4;
            --accent: #f59e0b;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --bg: #0f172a;
            --bg-card: rgba(30, 41, 59, 0.7);
            --bg-hover: rgba(51, 65, 85, 0.5);
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --border: rgba(148, 163, 184, 0.2);
            --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            --glow: 0 0 40px rgba(99, 102, 241, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .bg-animation::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle at 20% 80%, var(--primary) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, var(--secondary) 0%, transparent 50%),
                        radial-gradient(circle at 40% 40%, var(--accent) 0%, transparent 30%);
            opacity: 0.15;
            animation: bgMove 20s ease-in-out infinite;
        }
        @keyframes bgMove {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-2%, 2%) rotate(5deg); }
        }

        /* Grid Pattern Overlay */
        .grid-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                linear-gradient(rgba(99, 102, 241, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(99, 102, 241, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 2;
        }

        /* Glass Card Effect */
        .glass-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 40px;
            box-shadow: var(--shadow);
        }

        /* Typography */
        h1 {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--text) 0%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: var(--text-muted);
            font-size: 1.1rem;
            margin-bottom: 30px;
        }

        h2 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-light);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        h2::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        /* Form Styles */
        .form-group { margin-bottom: 24px; }
        .form-group label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-muted);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .form-group input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s;
        }
        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        .form-group input[readonly] { opacity: 0.6; cursor: not-allowed; }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 28px;
            font-size: 0.95rem;
            font-weight: 600;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.5);
        }
        .btn-secondary {
            background: var(--bg-hover);
            color: var(--text);
            border: 1px solid var(--border);
        }
        .btn-secondary:hover {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--primary);
        }
        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
        }
        .btn-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 30px;
        }

        /* Quiz Container */
        #quiz-container { display: none; }

        /* Question Card */
        .question-card {
            background: rgba(15, 23, 42, 0.4);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        .question-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s;
        }
        .question-card:hover::before { opacity: 1; }
        .question-card:hover {
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateX(5px);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
            gap: 12px;
        }

        .question-number {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .question-text {
            flex: 1;
            font-weight: 600;
            font-size: 1rem;
            line-height: 1.5;
        }

        .question-type {
            font-size: 0.75rem;
            color: var(--text-muted);
            background: var(--bg-hover);
            padding: 4px 12px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            white-space: nowrap;
        }

        /* Options */
        .options { display: flex; flex-direction: column; gap: 10px; }

        .option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            background: rgba(15, 23, 42, 0.4);
            border: 1px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .option:hover {
            background: var(--bg-hover);
            border-color: var(--primary-light);
        }
        .option input {
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
            flex-shrink: 0;
        }
        .option-text { font-size: 0.95rem; }

        /* Checkbox specific */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        /* Matching Task */
        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 600px) {
            .matching-container { grid-template-columns: 1fr; }
        }

        .matching-column h4 {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .term-box {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid var(--primary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            font-weight: 600;
            min-height: 60px;
            display: flex;
            align-items: center;
        }

        .drop-zone {
            min-height: 60px;
            background: rgba(15, 23, 42, 0.6);
            border: 2px dashed var(--border);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            transition: all 0.3s;
            position: relative;
        }
        .drop-zone.drag-over {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }
        .drop-zone.filled {
            border-style: solid;
            border-color: var(--primary-light);
        }

        .draggable-item {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            color: white;
            padding: 12px 16px;
            border-radius: 10px;
            cursor: grab;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
            transition: all 0.2s;
        }
        .draggable-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }
        .draggable-item.dragging { opacity: 0.5; }

        .remove-match {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            background: var(--error);
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            line-height: 1;
            display: none;
        }
        .drop-zone.filled .remove-match { display: flex; align-items: center; justify-content: center; }

        /* Sequence */
        .sequence-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .sequence-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border);
            border-radius: 12px;
            cursor: grab;
            transition: all 0.2s;
        }
        .sequence-item:hover { border-color: var(--primary-light); }
        .sequence-item.dragging { opacity: 0.5; box-shadow: var(--glow); }
        .seq-num {
            width: 28px;
            height: 28px;
            background: var(--bg-hover);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        .seq-handle { margin-left: auto; color: var(--text-muted); }

        /* Text Input */
        .text-input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s;
        }
        .text-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Select */
        .custom-select {
            width: 100%;
            padding: 14px 18px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 1rem;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 45px;
        }
        .custom-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Timer */
        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            padding: 12px 24px;
            border-radius: 50px;
            border: 1px solid var(--border);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            font-size: 1.1rem;
            z-index: 100;
            display: none;
            box-shadow: var(--shadow);
        }
        .timer.warning { color: var(--warning); border-color: var(--warning); }
        .timer.danger { color: var(--error); border-color: var(--error); animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }

        /* Progress */
        .progress-container {
            margin: 30px 0;
        }
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        .progress-bar {
            height: 6px;
            background: rgba(15, 23, 42, 0.6);
            border-radius: 3px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
        }

        /* Results */
        .results-card {
            text-align: center;
            padding: 40px;
        }
        .score-circle {
            width: 180px;
            height: 180px;
            margin: 0 auto 30px;
            position: relative;
        }
        .score-circle svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }
        .score-circle-bg {
            fill: none;
            stroke: rgba(255,255,255,0.1);
            stroke-width: 8;
        }
        .score-circle-fill {
            fill: none;
            stroke: url(#scoreGradient);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 440;
            stroke-dashoffset: 440;
            transition: stroke-dashoffset 1.5s ease;
        }
        .score-text {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            font-weight: 800;
        }
        .score-label {
            color: var(--text-muted);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .grade-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 700;
            margin: 20px 0;
            box-shadow: var(--glow);
        }
        .grade-excellent { background: linear-gradient(135deg, var(--success), #059669); }
        .grade-good { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); }
        .grade-satisfactory { background: linear-gradient(135deg, var(--warning), #d97706); color: var(--bg); }
        .grade-unsatisfactory { background: linear-gradient(135deg, var(--error), #dc2626); }

        .breakdown {
            background: rgba(15, 23, 42, 0.4);
            border-radius: 16px;
            padding: 24px;
            margin: 30px 0;
            text-align: left;
        }
        .breakdown h3 {
            font-size: 1rem;
            color: var(--text-muted);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.95rem;
        }
        .breakdown-item:last-child { border-bottom: none; }
        .breakdown-points { font-family: 'JetBrains Mono', monospace; color: var(--primary-light); }

        .history-section {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        /* Validation States */
        .correct {
            border-color: var(--success) !important;
            background: rgba(16, 185, 129, 0.1) !important;
        }
        .incorrect {
            border-color: var(--error) !important;
            background: rgba(239, 68, 68, 0.1) !important;
        }
        .partial {
            border-color: var(--warning) !important;
            background: rgba(245, 158, 11, 0.1) !important;
        }

        /* Animations */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-in { animation: slideUp 0.6s ease forwards; }

        /* Print styles */
        @media print {
            .bg-animation, .grid-overlay, .timer, .btn { display: none !important; }
            .container { max-width: 100%; }
            .glass-card { box-shadow: none; border: 1px solid #ccc; }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    <div class="grid-overlay"></div>
    
    <div class="timer" id="timer">‚è±Ô∏è <span id="time-display">30:00</span></div>

    <div class="container">
        <!-- Login Form -->
        <div class="glass-card animate-in" id="login-card">
            <h1>üöÇ –°–∞–º–æ—Å—Ç—ñ–π–Ω–∞ —Ä–æ–±–æ—Ç–∞</h1>
            <p class="subtitle">–¢–µ—Ä–º—ñ–Ω–∏ —Ç–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ —Å–∏–≥–Ω–∞–ª—ñ–∑–∞—Ü—ñ—ó (–Ü–°–ò)</p>
            
            <div class="form-group">
                <label>–ü—Ä—ñ–∑–≤–∏—â–µ, —ñ–º'—è, –ø–æ –±–∞—Ç—å–∫–æ–≤—ñ</label>
                <input type="text" id="student-name" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –ü–µ—Ç—Ä–µ–Ω–∫–æ –Ü–≤–∞–Ω –ú–∏—Ö–∞–π–ª–æ–≤–∏—á">
            </div>
            
            <div class="form-group">
                <label>–ù–∞–≤—á–∞–ª—å–Ω–∞ –≥—Ä—É–ø–∞</label>
                <input type="text" id="student-group" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –ó–†-31">
            </div>
            
            <div class="form-group">
                <label>–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—è</label>
                <input type="text" id="current-date" readonly>
            </div>

            <div class="btn-group">
                <button class="btn btn-primary" onclick="startQuiz()">–†–æ–∑–ø–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É ‚Üí</button>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container">
            <div class="glass-card">
                <h1>–ü–∏—Ç–∞–Ω–Ω—è –Ü–°–ò</h1>
                <p class="subtitle">–í—Å—å–æ–≥–æ 15 –ø–∏—Ç–∞–Ω—å. –ö–æ–∂–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å = 1 –±–∞–ª.</p>
                
                <div class="progress-container">
                    <div class="progress-header">
                        <span>–ü—Ä–æ–≥—Ä–µ—Å</span>
                        <span id="progress-text">0/15</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <div id="questions-wrapper"></div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="checkAnswers()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</button>
                </div>
            </div>
        </div>

        <!-- Results Container -->
        <div id="results-container" style="display: none;">
            <div class="glass-card results-card">
                <svg width="0" height="0">
                    <defs>
                        <linearGradient id="scoreGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#6366f1" />
                            <stop offset="100%" stop-color="#06b6d4" />
                        </linearGradient>
                    </defs>
                </svg>
                
                <div class="score-circle">
                    <svg viewBox="0 0 160 160">
                        <circle class="score-circle-bg" cx="80" cy="80" r="70"/>
                        <circle class="score-circle-fill" id="score-circle" cx="80" cy="80" r="70"/>
                    </svg>
                    <div class="score-text">
                        <div id="final-score">0</div>
                        <div class="score-label">–∑ 15</div>
                    </div>
                </div>

                <div id="grade-badge" class="grade-badge">–û—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è...</div>
                
                <p id="result-message" style="color: var(--text-muted); margin-bottom: 20px;"></p>

                <div class="breakdown">
                    <h3>–î–µ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π</h3>
                    <div id="breakdown-content"></div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="location.reload()">‚Üª –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É</button>
                    <button class="btn btn-success" onclick="window.print()">üñ®Ô∏è –î—Ä—É–∫—É–≤–∞—Ç–∏</button>
                </div>

                <div class="history-section" id="history-section" style="display: none;">
                    <h3 style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 12px;">–Ü—Å—Ç–æ—Ä—ñ—è —Å–ø—Ä–æ–±</h3>
                    <div id="history-content"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // –ë–ê–ó–ê –ü–ò–¢–ê–ù–¨ (15 –ø–∏—Ç–∞–Ω—å)
        // ==========================================
        const questions = [
            {
                id: 1,
                type: 'single',
                typeLabel: '–û–¥–∏–Ω–æ—á–Ω–∏–π –≤–∏–±—ñ—Ä',
                question: '–©–æ —Ç–∞–∫–µ "–ø–æ—ó–∑–¥" –∑–≥—ñ–¥–Ω–æ –∑ –Ü–°–ò?',
                options: [
                    '–õ–æ–∫–æ–º–æ—Ç–∏–≤ –∑ –≤–∞–≥–æ–Ω–∞–º–∏',
                    '–°—Ñ–æ—Ä–º–æ–≤–∞–Ω–∏–π —ñ –∑—á–µ–ø–ª–µ–Ω–∏–π —Å–æ—Å—Ç–∞–≤ –≤–∞–≥–æ–Ω—ñ–≤ –∑ –¥—ñ—é—á–∏–º–∏ –ª–æ–∫–æ–º–æ—Ç–∏–≤–∞–º–∏/–º–æ—Ç–æ—Ä–Ω–∏–º–∏ –≤–∞–≥–æ–Ω–∞–º–∏, —â–æ –º–∞—é—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ —Å–∏–≥–Ω–∞–ª–∏',
                    '–ë—É–¥—å-—è–∫–∏–π —Ä—É—Ö–æ–º–∏–π —Å–∫–ª–∞–¥ –Ω–∞ –∫–æ–ª—ñ—ó',
                    '–ì—Ä—É–ø–∞ –≤–∞–≥–æ–Ω—ñ–≤, —â–æ —Ä—É—Ö–∞—é—Ç—å—Å—è —Ä–∞–∑–æ–º'
                ],
                correct: [1] // —ñ–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
            },
            {
                id: 2,
                type: 'single',
                typeLabel: '–û–¥–∏–Ω–æ—á–Ω–∏–π –≤–∏–±—ñ—Ä',
                question: '–Ø–∫–∏–π —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–π –ø—É–Ω–∫—Ç –º–∞—î –∫–æ–ª—ñ–π–Ω–∏–π —Ä–æ–∑–≤–∏—Ç–æ–∫ –¥–ª—è –æ–ø–µ—Ä–∞—Ü—ñ–π –∑ –ø—Ä–∏–π–º–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ—ó–∑–¥—ñ–≤?',
                options: [
                    '–ü–µ—Ä–µ–≥—ñ–Ω',
                    '–ó—É–ø–∏–Ω–Ω–∏–π –ø—É–Ω–∫—Ç',
                    '–°—Ç–∞–Ω—Ü—ñ—è',
                    '–ë–ª–æ–∫–ø–æ—Å—Ç'
                ],
                correct: [2]
            },
            {
                id: 3,
                type: 'multiple',
                typeLabel: '–ú–Ω–æ–∂–∏–Ω–Ω–∏–π –≤–∏–±—ñ—Ä',
                question: '–Ø–∫—ñ –∑ –ø–µ—Ä–µ–ª—ñ—á–µ–Ω–∏—Ö —î –æ—Å–Ω–æ–≤–Ω–∏–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Å—Ç—Ä—ñ–ª–æ—á–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥—É? (–û–±–µ—Ä—ñ—Ç—å —É—Å—ñ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ)',
                options: [
                    '–í—ñ—Å—Ç—Ä—è–∫–∏',
                    '–†–∞–º–Ω—ñ —Ä–µ–π–∫–∏',
                    '–•—Ä–µ—Å—Ç–æ–≤–∏–Ω–∞',
                    '–ü–µ—Ä–µ–≤—ñ–¥–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º',
                    '–ö–æ–ª—ñ–π–Ω—ñ —Ä–µ–ª–µ'
                ],
                correct: [0, 1, 2, 3] // 4 –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ = 4 –±–∞–ª–∏
            },
            {
                id: 4,
                type: 'multiple',
                typeLabel: '–ú–Ω–æ–∂–∏–Ω–Ω–∏–π –≤–∏–±—ñ—Ä',
                question: '–Ø–∫—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó –≤—Ö–æ–¥—è—Ç—å –¥–æ —Å–∫–ª–∞–¥—É —Å–∏—Å—Ç–µ–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –ª–æ–∫–æ–º–æ—Ç–∏–≤–Ω–æ—ó —Å–∏–≥–Ω–∞–ª—ñ–∑–∞—Ü—ñ—ó (–ê–õ–°)?',
                options: [
                    '–ö–∞–±—ñ–Ω–∞ –º–∞—à–∏–Ω—ñ—Å—Ç–∞',
                    '–ö–æ–ª—ñ–π–Ω—ñ —Ç—Ä–∞–Ω—Å–º—ñ—Ç–µ—Ä–∏',
                    '–õ–æ–∫–æ–º–æ—Ç–∏–≤–Ω—ñ –ø—Ä–∏–π–º–∞—á—ñ',
                    '–î–∏—Å–ø–µ—Ç—á–µ—Ä—Å—å–∫–∏–π –ø—É–Ω–∫—Ç',
                    '–î–µ—à–∏—Ñ—Ä–∞—Ç–æ—Ä–∏ —Å–∏–≥–Ω–∞–ª—ñ–≤'
                ],
                correct: [1, 2, 4] // 3 –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ = 3 –±–∞–ª–∏
            },
            {
                id: 5,
                type: 'matching',
                typeLabel: '–ù–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å',
                question: '–ü–æ—î–¥–Ω–∞–π—Ç–µ —Ç–µ—Ä–º—ñ–Ω –∑ –π–æ–≥–æ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è–º:',
                left: ['–ü–µ—Ä–µ–≥—ñ–Ω', '–ó—É–ø–∏–Ω–Ω–∏–π –ø—É–Ω–∫—Ç', '–ë–ª–æ–∫–ø–æ—Å—Ç'],
                right: [
                    '–†–æ–∑–¥—ñ–ª—å–Ω–∏–π –ø—É–Ω–∫—Ç –±–µ–∑ –∫–æ–ª—ñ–π–Ω–æ–≥–æ —Ä–æ–∑–≤–∏—Ç–∫—É –¥–ª—è –∑—É–ø–∏–Ω–∫–∏ –ø–∞—Å–∞–∂–∏—Ä—Å—å–∫–∏—Ö –ø–æ—ó–∑–¥—ñ–≤',
                    '–ß–∞—Å—Ç–∏–Ω–∞ –∑–∞–ª—ñ–∑–Ω–∏—á–Ω–æ—ó –ª—ñ–Ω—ñ—ó –º—ñ–∂ —Å—É—Å—ñ–¥–Ω—ñ–º–∏ —Å—Ç–∞–Ω—Ü—ñ—è–º–∏',
                    '–†–æ–∑–¥—ñ–ª—å–Ω–∏–π –ø—É–Ω–∫—Ç –¥–ª—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–≥–æ–Ω—É –Ω–∞ –±–ª–æ–∫-–¥—ñ–ª—è–Ω–∫–∏'
                ],
                correct: [1, 0, 2] // left[i] –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î right[correct[i]]
            },
            {
                id: 6,
                type: 'sequence',
                typeLabel: '–ù–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å',
                question: '–†–æ–∑—Ç–∞—à—É–π—Ç–µ –µ—Ç–∞–ø–∏ –ø—Ä–æ—Ü–µ—Å—É –≥–∞–ª—å–º—É–≤–∞–Ω–Ω—è –ø–æ—ó–∑–¥–∞ —É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É:',
                items: [
                    '–ü–µ—Ä–µ–∫–ª–∞–¥–µ–Ω–Ω—è —Ä—É—á–∫–∏ –∫—Ä–∞–Ω–∞ –º–∞—à–∏–Ω—ñ—Å—Ç–∞',
                    '–ü–µ—Ä–µ–¥–∞—á–∞ —Å–∏–≥–Ω–∞–ª—É –ø–æ –≥–∞–ª—å–º—ñ–≤–Ω—ñ–π –º–∞–≥—ñ—Å—Ç—Ä–∞–ª—ñ',
                    '–ù–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è –ø–æ–≤—ñ—Ç—Ä—è –¥–æ –≥–∞–ª—å–º—ñ–≤–Ω–∏—Ö —Ü–∏–ª—ñ–Ω–¥—Ä—ñ–≤',
                    '–ù–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–æ–ª–æ–¥–æ–∫ –Ω–∞ –∫–æ–ª–µ—Å–∞',
                    '–ó—É–ø–∏–Ω–∫–∞ –ø–æ—ó–∑–¥–∞'
                ],
                correct: [0, 1, 2, 3, 4] // –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫
            },
            {
                id: 7,
                type: 'text',
                typeLabel: '–í–≤–µ–¥–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ',
                question: '–ù–∞–∑–≤—ñ—Ç—å –æ—Å–Ω–æ–≤–Ω—ñ –∫–æ–ª—å–æ—Ä–∏ —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä—ñ–≤ (—á–µ—Ä–µ–∑ –∫–æ–º—É):',
                answer: ['–±—ñ–ª–∏–π', '—á–µ—Ä–≤–æ–Ω–∏–π', '–∂–æ–≤—Ç–∏–π', '–∑–µ–ª–µ–Ω–∏–π', '—Å–∏–Ω—ñ–π', '–±–ª–∞–∫–∏—Ç–Ω–∏–π'],
                partial: true // —á–∞—Å—Ç–∫–æ–≤–µ –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è
            },
            {
                id: 8,
                type: 'single',
                typeLabel: '–û–¥–∏–Ω–æ—á–Ω–∏–π –≤–∏–±—ñ—Ä',
                question: '–ì–∞–ª—å–º–æ–≤–∞ –ø—É—Ç—å ‚Äî —Ü–µ –≤—ñ–¥—Å—Ç–∞–Ω—å, —è–∫—É –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ—ó–∑–¥...',
                options: [
                    '–≤—ñ–¥ –º–æ–º–µ–Ω—Ç—É –ø–µ—Ä–µ–≤–æ–¥—É —Ä—É—á–∫–∏ –∫—Ä–∞–Ω–∞ –≤ –≥–∞–ª—å–º–æ–≤–µ –ø–æ–ª–æ–∂–µ–Ω–Ω—è –¥–æ –ø–æ–≤–Ω–æ—ó –∑—É–ø–∏–Ω–∫–∏',
                    '–∑–∞ –æ–¥–Ω—É —Ö–≤–∏–ª–∏–Ω—É –ø—Ä–∏ –µ–∫—Å—Ç—Ä–µ–Ω–æ–º—É –≥–∞–ª—å–º—É–≤–∞–Ω–Ω—ñ',
                    '–≤—ñ–¥ –º–æ–º–µ–Ω—Ç—É –ø–æ–±–∞—á–µ–Ω–Ω—è —Å–∏–≥–Ω–∞–ª—É –¥–æ –∑—É–ø–∏–Ω–∫–∏',
                    '–º—ñ–∂ –¥–≤–æ–º–∞ —Å—É—Å—ñ–¥–Ω—ñ–º–∏ —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä–∞–º–∏'
                ],
                correct: [0]
            },
            {
                id: 9,
                type: 'multiple',
                typeLabel: '–ú–Ω–æ–∂–∏–Ω–Ω–∏–π –≤–∏–±—ñ—Ä',
                question: '–Ø–∫—ñ —Å–∏–≥–Ω–∞–ª–∏ –º–æ–∂—É—Ç—å –ø–æ–¥–∞–≤–∞—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä–∞? (–û–±–µ—Ä—ñ—Ç—å —É—Å—ñ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ)',
                options: [
                    '–ß–µ—Ä–≤–æ–Ω–∏–π ‚Äî –∑–∞–±–æ—Ä–æ–Ω–∞ —Ä—É—Ö—É',
                    '–ñ–æ–≤—Ç–∏–π ‚Äî —É–≤–∞–≥–∞',
                    '–ó–µ–ª–µ–Ω–∏–π ‚Äî –¥–æ–∑–≤—ñ–ª —Ä—É—Ö—É',
                    '–ë—ñ–ª–∏–π ‚Äî –º–∞–Ω–µ–≤—Ä–æ–≤–∏–π —Ä—É—Ö –¥–æ–∑–≤–æ–ª–µ–Ω–æ',
                    '–°–∏–Ω—ñ–π ‚Äî —Ä—É—Ö –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ'
                ],
                correct: [0, 1, 2, 3, 4] // 5 –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
            },
            {
                id: 10,
                type: 'select',
                typeLabel: '–í–∏–±—ñ—Ä —ñ–∑ —Å–ø–∏—Å–∫—É',
                question: '–•—Ç–æ –æ–¥–Ω–æ–æ—Å–æ–±–æ–≤–æ —Ä–æ–∑–ø–æ—Ä—è–¥–∂–∞—î—Ç—å—Å—è –ø—Ä–∏–π–º–∞–Ω–Ω—è–º —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º –ø–æ—ó–∑–¥—ñ–≤ –Ω–∞ —Å—Ç–∞–Ω—Ü—ñ—ó?',
                options: [
                    '–ù–∞—á–∞–ª—å–Ω–∏–∫ —Å—Ç–∞–Ω—Ü—ñ—ó',
                    '–ß–µ—Ä–≥–æ–≤–∏–π –ø–æ —Å—Ç–∞–Ω—Ü—ñ—ó',
                    '–ú–∞—à–∏–Ω—ñ—Å—Ç –ª–æ–∫–æ–º–æ—Ç–∏–≤–∞',
                    '–î–∏—Å–ø–µ—Ç—á–µ—Ä –ø–æ—ó–∑–Ω–∏–π'
                ],
                correct: 1 // —ñ–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
            },
            {
                id: 11,
                type: 'text',
                typeLabel: '–í–≤–µ–¥–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ',
                question: '–°–∏—Å—Ç–µ–º–∞ —Ç—Ä—É–±–æ–ø—Ä–æ–≤–æ–¥—ñ–≤ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ —Å—Ç–∏—Å–Ω–µ–Ω–æ–≥–æ –ø–æ–≤—ñ—Ç—Ä—è –≤—ñ–¥ –∫—Ä–∞–Ω–∞ –º–∞—à–∏–Ω—ñ—Å—Ç–∞ –¥–æ –≥–∞–ª—å–º—ñ–≤–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è:',
                answer: ['–≥–∞–ª—å–º—ñ–≤–Ω–∞ –º–∞–≥—ñ—Å—Ç—Ä–∞–ª—å', '–≥–∞–ª—å–º–æ–≤–∞ –º–∞–≥—ñ—Å—Ç—Ä–∞–ª—å', '–≥–∞–ª—å–º—ñ–≤–Ω–∞–º–∞–≥—ñ—Å—Ç—Ä–∞–ª—å', '–≥–∞–ª—å–º–æ–≤–∞–º–∞–≥—ñ—Å—Ç—Ä–∞–ª—å'],
                partial: false
            },
            {
                id: 12,
                type: 'single',
                typeLabel: '–û–¥–∏–Ω–æ—á–Ω–∏–π –≤–∏–±—ñ—Ä',
                question: '–©–æ –∑ –ø–µ—Ä–µ–ª—ñ—á–µ–Ω–æ–≥–æ –ù–ï —î –ª–æ–∫–æ–º–æ—Ç–∏–≤–æ–º?',
                options: [
                    '–¢–µ–ø–ª–æ–≤–æ–∑',
                    '–ï–ª–µ–∫—Ç—Ä–æ–≤–æ–∑',
                    '–ï–ª–µ–∫—Ç—Ä–æ–ø–æ—ó–∑–¥',
                    '–ú–æ—Ç–æ–≤–æ–∑'
                ],
                correct: [2]
            },
            {
                id: 13,
                type: 'multiple',
                typeLabel: '–ú–Ω–æ–∂–∏–Ω–Ω–∏–π –≤–∏–±—ñ—Ä',
                question: '–Ø–∫—ñ –∑ –ø–µ—Ä–µ–ª—ñ—á–µ–Ω–∏—Ö —î —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–º–∏ –ø—É–Ω–∫—Ç–∞–º–∏?',
                options: [
                    '–°—Ç–∞–Ω—Ü—ñ—è',
                    '–ü–µ—Ä–µ–≥—ñ–Ω',
                    '–ó—É–ø–∏–Ω–Ω–∏–π –ø—É–Ω–∫—Ç',
                    '–ü—ñ–¥\'—ó–∑–Ω–∞ –∫–æ–ª—ñ—è',
                    '–ë–ª–æ–∫–ø–æ—Å—Ç'
                ],
                correct: [0, 1, 2, 4] // 4 –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
            },
            {
                id: 14,
                type: 'sequence',
                typeLabel: '–ù–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å',
                question: '–†–æ–∑—Ç–∞—à—É–π—Ç–µ –¥—ñ—ó –ø—Ä–∏ –ø—Ä–∏–π–º–∞–Ω–Ω—ñ –ø–æ—ó–∑–¥–∞ –Ω–∞ —Å—Ç–∞–Ω—Ü—ñ—é:',
                items: [
                    '–í—ñ–¥–∫—Ä–∏—Ç—Ç—è –≤—Ö—ñ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª—É',
                    '–ü–æ–¥–∞—á–∞ —Å–∏–≥–Ω–∞–ª—É –º–∞—à–∏–Ω—ñ—Å—Ç—É –ø—Ä–æ –≤\'—ó–∑–¥',
                    '–í–∏–¥–∞—á–∞ –º–∞—Ä—à—Ä—É—Ç—É –ø—Ä–∏–π–º–∞–Ω–Ω—è',
                    '–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–ª—å–Ω–æ—Å—Ç—ñ –∫–æ–ª—ñ—ó',
                    '–§—ñ–∫—Å–∞—Ü—ñ—è —á–∞—Å—É –ø—Ä–∏–±—É—Ç—Ç—è'
                ],
                correct: [3, 2, 0, 1, 4]
            },
            {
                id: 15,
                type: 'single',
                typeLabel: '–û–¥–∏–Ω–æ—á–Ω–∏–π –≤–∏–±—ñ—Ä',
                question: '–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–ª—ñ–π –Ω–∞ —Å—Ç–∞–Ω—Ü—ñ—ó –¥–ª—è –∑–¥—ñ–π—Å–Ω–µ–Ω–Ω—è –æ–±–≥–æ–Ω—É –ø–æ—ó–∑–¥—ñ–≤:',
                options: [
                    '1 –∫–æ–ª—ñ—è',
                    '2 –∫–æ–ª—ñ—ó',
                    '3 –∫–æ–ª—ñ—ó',
                    '4 –∫–æ–ª—ñ—ó'
                ],
                correct: [2]
            }
        ];

        // ==========================================
        // –°–¢–ê–ù –î–û–î–ê–¢–ö–£
        // ==========================================
        let currentAnswers = {};
        let timerInterval;
        let timeRemaining = 30 * 60; // 30 —Ö–≤–∏–ª–∏–Ω

        // ==========================================
        // –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø
        // ==========================================
        document.getElementById('current-date').value = new Date().toLocaleDateString('uk-UA');

        // ==========================================
        // –†–ï–ù–î–ï–†–ò–ù–ì –ü–ò–¢–ê–ù–¨
        // ==========================================
        function renderQuestions() {
            const wrapper = document.getElementById('questions-wrapper');
            wrapper.innerHTML = '';

            questions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'question-card animate-in';
                card.style.animationDelay = `${index * 0.05}s`;
                card.dataset.id = q.id;

                let content = `
                    <div class="question-header">
                        <div class="question-number">${q.id}</div>
                        <div class="question-text">${q.question}</div>
                        <div class="question-type">${q.typeLabel}</div>
                    </div>
                `;

                switch(q.type) {
                    case 'single':
                        content += renderSingle(q);
                        break;
                    case 'multiple':
                        content += renderMultiple(q);
                        break;
                    case 'matching':
                        content += renderMatching(q);
                        break;
                    case 'sequence':
                        content += renderSequence(q);
                        break;
                    case 'text':
                        content += renderText(q);
                        break;
                    case 'select':
                        content += renderSelect(q);
                        break;
                }

                card.innerHTML = content;
                wrapper.appendChild(card);
            });

            initDragAndDrop();
            initSequenceDrag();
        }

        function renderSingle(q) {
            return `<div class="options">
                ${q.options.map((opt, i) => `
                    <label class="option">
                        <input type="radio" name="q${q.id}" value="${i}" onchange="updateProgress()">
                        <span class="option-text">${opt}</span>
                    </label>
                `).join('')}
            </div>`;
        }

        function renderMultiple(q) {
            const isGrid = q.options.length >= 4;
            return `<div class="${isGrid ? 'checkbox-grid' : 'options'}">
                ${q.options.map((opt, i) => `
                    <label class="option">
                        <input type="checkbox" name="q${q.id}" value="${i}" onchange="updateProgress()">
                        <span class="option-text">${opt}</span>
                    </label>
                `).join('')}
            </div>`;
        }

        function renderMatching(q) {
            // –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ –ø—Ä–∞–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
            const rightIndices = [...Array(q.right.length).keys()].sort(() => Math.random() - 0.5);
            
            return `<div class="matching-container">
                <div class="matching-column">
                    <h4>–¢–µ—Ä–º—ñ–Ω–∏</h4>
                    ${q.left.map((term, i) => `
                        <div class="term-box">${term}</div>
                        <div class="drop-zone" data-left-index="${i}" data-correct="${q.correct[i]}">
                            <span style="color: var(--text-muted); font-size: 0.875rem;">–ü–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å —Å—é–¥–∏...</span>
                            <button class="remove-match" onclick="clearMatch(this)">√ó</button>
                        </div>
                    `).join('')}
                </div>
                <div class="matching-column">
                    <h4>–í–∏–∑–Ω–∞—á–µ–Ω–Ω—è</h4>
                    <div id="pool-${q.id}">
                        ${rightIndices.map(idx => `
                            <div class="draggable-item" draggable="true" data-right-index="${idx}">
                                ${q.right[idx]}
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>`;
        }

        function renderSequence(q) {
            // –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏
            const shuffled = [...q.items].map((item, i) => ({item, originalIndex: i}))
                .sort(() => Math.random() - 0.5);
            
            return `<div class="sequence-list" id="seq-${q.id}">
                ${shuffled.map(({item, originalIndex}, i) => `
                    <div class="sequence-item" draggable="true" data-original-index="${originalIndex}" data-current-pos="${i}">
                        <div class="seq-num">${i + 1}</div>
                        <div>${item}</div>
                        <div class="seq-handle">‚ãÆ‚ãÆ</div>
                    </div>
                `).join('')}
            </div>`;
        }

        function renderText(q) {
            return `<input type="text" class="text-input" id="text-${q.id}" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å..." oninput="updateProgress()">`;
        }

        function renderSelect(q) {
            return `<select class="custom-select" id="select-${q.id}" onchange="updateProgress()">
                <option value="">-- –û–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å --</option>
                ${q.options.map((opt, i) => `<option value="${i}">${opt}</option>`).join('')}
            </select>`;
        }

        // ==========================================
        // DRAG AND DROP
        // ==========================================
        function initDragAndDrop() {
            document.querySelectorAll('.draggable-item').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', item.dataset.rightIndex);
                    item.classList.add('dragging');
                });
                item.addEventListener('dragend', () => {
                    item.classList.remove('dragging');
                });
            });

            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    const rightIndex = e.dataTransfer.getData('text/plain');
                    const dragged = document.querySelector(`.draggable-item[data-right-index="${rightIndex}"]`);
                    
                    if (dragged && !zone.querySelector('.draggable-item')) {
                        zone.innerHTML = '';
                        zone.appendChild(dragged);
                        zone.appendChild(zone.querySelector('.remove-match'));
                        zone.classList.add('filled');
                        updateProgress();
                    }
                });
            });
        }

        function clearMatch(btn) {
            const zone = btn.parentElement;
            const item = zone.querySelector('.draggable-item');
            if (item) {
                // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –≤ –ø—É–ª
                const pool = zone.closest('.matching-container').querySelector('[id^="pool-"]');
                pool.appendChild(item);
                zone.classList.remove('filled');
                zone.innerHTML = '<span style="color: var(--text-muted); font-size: 0.875rem;">–ü–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å —Å—é–¥–∏...</span>';
                zone.appendChild(btn);
                updateProgress();
            }
        }

        // ==========================================
        // SEQUENCE DRAG
        // ==========================================
        function initSequenceDrag() {
            document.querySelectorAll('.sequence-list').forEach(list => {
                let dragged = null;
                
                list.querySelectorAll('.sequence-item').forEach(item => {
                    item.addEventListener('dragstart', () => {
                        dragged = item;
                        item.classList.add('dragging');
                    });
                    item.addEventListener('dragend', () => {
                        item.classList.remove('dragging');
                        dragged = null;
                        updateSequenceNumbers(list);
                        updateProgress();
                    });
                    item.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        if (!dragged) return;
                        const after = getDragAfter(list, e.clientY);
                        if (after) list.insertBefore(dragged, after);
                        else list.appendChild(dragged);
                    });
                });
            });
        }

        function getDragAfter(container, y) {
            const items = [...container.querySelectorAll('.sequence-item:not(.dragging)')];
            return items.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                if (offset < 0 && offset > closest.offset) {
                    return { offset, element: child };
                }
                return closest;
            }, { offset: -Infinity }).element;
        }

        function updateSequenceNumbers(list) {
            list.querySelectorAll('.sequence-item').forEach((item, i) => {
                item.querySelector('.seq-num').textContent = i + 1;
                item.dataset.currentPos = i;
            });
        }

        // ==========================================
        // –ü–†–û–ì–†–ï–° –¢–ê –¢–ê–ô–ú–ï–†
        // ==========================================
        function updateProgress() {
            let answered = 0;
            const total = questions.length;

            questions.forEach(q => {
                switch(q.type) {
                    case 'single':
                    case 'select':
                        if (document.querySelector(`[name="q${q.id}"]:checked`) || 
                            document.getElementById(`select-${q.id}`)?.value) answered++;
                        break;
                    case 'multiple':
                        if (document.querySelectorAll(`[name="q${q.id}"]:checked`).length > 0) answered++;
                        break;
                    case 'matching':
                        const zones = document.querySelectorAll(`.drop-zone[data-left-index]`);
                        const filled = [...zones].filter(z => z.querySelector('.draggable-item')).length;
                        if (filled === q.left.length) answered++;
                        break;
                    case 'sequence':
                        answered++; // –ó–∞–≤–∂–¥–∏ –≤–≤–∞–∂–∞—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —î (–ø–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞–Ω–∏–π)
                        break;
                    case 'text':
                        if (document.getElementById(`text-${q.id}`)?.value.trim()) answered++;
                        break;
                }
            });

            const percent = (answered / total) * 100;
            document.getElementById('progress-bar').style.width = percent + '%';
            document.getElementById('progress-text').textContent = `${answered}/${total}`;
        }

        function startTimer() {
            document.getElementById('timer').style.display = 'block';
            updateTimer();
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimer();
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    checkAnswers();
                }
            }, 1000);
        }

        function updateTimer() {
            const m = Math.floor(timeRemaining / 60).toString().padStart(2, '0');
            const s = (timeRemaining % 60).toString().padStart(2, '0');
            document.getElementById('time-display').textContent = `${m}:${s}`;
            
            const timer = document.getElementById('timer');
            timer.classList.toggle('warning', timeRemaining <= 300);
            timer.classList.toggle('danger', timeRemaining <= 60);
        }

        // ==========================================
        // –ü–ï–†–ï–í–Ü–†–ö–ê –í–Ü–î–ü–û–í–Ü–î–ï–ô
        // ==========================================
        function checkAnswers() {
            clearInterval(timerInterval);
            let totalScore = 0;
            const details = [];

            questions.forEach(q => {
                let score = 0;
                let maxPossible = 0;

                switch(q.type) {
                    case 'single':
                    case 'select':
                        maxPossible = 1;
                        const val = q.type === 'select' 
                            ? parseInt(document.getElementById(`select-${q.id}`).value)
                            : parseInt(document.querySelector(`[name="q${q.id}"]:checked`)?.value);
                        if (!isNaN(val) && val === q.correct[0]) score = 1;
                        break;

                    case 'multiple':
                        maxPossible = q.correct.length;
                        const checked = [...document.querySelectorAll(`[name="q${q.id}"]:checked`)].map(cb => parseInt(cb.value));
                        // –ó–∞ –∫–æ–∂–Ω—É –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å +1, –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É 0
                        q.correct.forEach(correctIdx => {
                            if (checked.includes(correctIdx)) score++;
                        });
                        break;

                    case 'matching':
                        maxPossible = q.left.length;
                        document.querySelectorAll(`.drop-zone[data-left-index]`).forEach(zone => {
                            const leftIdx = parseInt(zone.dataset.leftIndex);
                            const correctRightIdx = q.correct[leftIdx];
                            const placed = zone.querySelector('.draggable-item');
                            if (placed && parseInt(placed.dataset.rightIndex) === correctRightIdx) {
                                score++;
                            }
                        });
                        break;

                    case 'sequence':
                        maxPossible = q.items.length;
                        const items = document.querySelectorAll(`#seq-${q.id} .sequence-item`);
                        items.forEach((item, currentPos) => {
                            const originalIdx = parseInt(item.dataset.originalIndex);
                            if (q.correct[currentPos] === originalIdx) score++;
                        });
                        break;

                    case 'text':
                        maxPossible = 1;
                        const input = document.getElementById(`text-${q.id}`).value.toLowerCase().trim();
                        if (q.partial) {
                            // –ß–∞—Å—Ç–∫–æ–≤–µ –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è –¥–ª—è –∫–æ–ª—å–æ—Ä—ñ–≤ —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä–∞
                            const userAnswers = input.split(/[,;]/).map(s => s.trim()).filter(s => s);
                            const correctCount = userAnswers.filter(ans => 
                                q.answer.some(correct => ans === correct || correct.includes(ans) || ans.includes(correct))
                            ).length;
                            score = Math.min(1, correctCount / Math.min(userAnswers.length, q.answer.length));
                            score = Math.round(score * 10) / 10; // –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –¥–æ 0.1
                        } else {
                            if (q.answer.some(ans => input === ans || input.includes(ans))) score = 1;
                        }
                        break;
                }

                totalScore += score;
                details.push({
                    id: q.id,
                    type: q.typeLabel,
                    score: score,
                    max: maxPossible,
                    question: q.question.substring(0, 50) + '...'
                });

                // –í—ñ–∑—É–∞–ª—å–Ω–µ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è
                highlightAnswer(q, score, maxPossible);
            });

            showResults(totalScore, details);
        }

        function highlightAnswer(q, score, max) {
            const card = document.querySelector(`.question-card[data-id="${q.id}"]`);
            
            switch(q.type) {
                case 'single':
                case 'select':
                    const correctVal = q.correct[0];
                    const selected = q.type === 'select'
                        ? document.getElementById(`select-${q.id}`)
                        : document.querySelector(`[name="q${q.id}"][value="${correctVal}"]`)?.parentElement;
                    if (selected) {
                        selected.classList.add(score === 1 ? 'correct' : 'incorrect');
                    }
                    break;
                
                case 'multiple':
                    document.querySelectorAll(`[name="q${q.id}"]`).forEach(cb => {
                        const val = parseInt(cb.value);
                        const label = cb.parentElement;
                        if (q.correct.includes(val)) {
                            label.classList.add('correct');
                        } else if (cb.checked) {
                            label.classList.add('incorrect');
                        }
                    });
                    break;

                case 'matching':
                    document.querySelectorAll(`.drop-zone[data-left-index]`).forEach(zone => {
                        const leftIdx = parseInt(zone.dataset.leftIndex);
                        const correctRightIdx = q.correct[leftIdx];
                        const placed = zone.querySelector('.draggable-item');
                        if (placed && parseInt(placed.dataset.rightIndex) === correctRightIdx) {
                            zone.classList.add('correct');
                        } else {
                            zone.classList.add('incorrect');
                        }
                    });
                    break;

                case 'sequence':
                    const items = document.querySelectorAll(`#seq-${q.id} .sequence-item`);
                    items.forEach((item, pos) => {
                        const origIdx = parseInt(item.dataset.originalIndex);
                        if (q.correct[pos] === origIdx) {
                            item.classList.add('correct');
                        } else {
                            item.classList.add('incorrect');
                        }
                    });
                    break;

                case 'text':
                    const input = document.getElementById(`text-${q.id}`);
                    if (score === 1) input.classList.add('correct');
                    else if (score > 0) input.classList.add('partial');
                    else input.classList.add('incorrect');
                    break;
            }
        }

        // ==========================================
        // –ü–û–ö–ê–ó –†–ï–ó–£–õ–¨–¢–ê–¢–Ü–í
        // ==========================================
        function showResults(score, details) {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('timer').style.display = 'none';
            const results = document.getElementById('results-container');
            results.style.display = 'block';

            // –ê–Ω—ñ–º–∞—Ü—ñ—è –∫–æ–ª–∞
            const maxScore = questions.reduce((sum, q) => {
                if (q.type === 'multiple') return sum + q.correct.length;
                if (q.type === 'matching') return sum + q.left.length;
                if (q.type === 'sequence') return sum + q.items.length;
                return sum + 1;
            }, 0);

            // –î–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è: –º–∞–∫—Å–∏–º—É–º 15 –±–∞–ª—ñ–≤ (–ø–æ 1 –∑–∞ –ø–∏—Ç–∞–Ω–Ω—è –≤ —Å–µ—Ä–µ–¥–Ω—å–æ–º—É)
            const displayMax = 15;
            const displayScore = Math.round(score);
            
            document.getElementById('final-score').textContent = displayScore;
            
            // –ê–Ω—ñ–º–∞—Ü—ñ—è –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –∫–æ–ª–∞
            setTimeout(() => {
                const circle = document.getElementById('score-circle');
                const offset = 440 - (displayScore / displayMax) * 440;
                circle.style.strokeDashoffset = offset;
            }, 300);

            // –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –æ—Ü—ñ–Ω–∫–∏
            const percentage = (displayScore / displayMax) * 100;
            let grade, badgeClass, message;

            if (percentage >= 90) {
                grade = '–í—ñ–¥–º—ñ–Ω–Ω–æ üèÜ';
                badgeClass = 'grade-excellent';
                message = '–ß—É–¥–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í–∏ –≥–ª–∏–±–æ–∫–æ –∑–∞—Å–≤–æ—ó–ª–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª.';
            } else if (percentage >= 75) {
                grade = '–î–æ–±—Ä–µ üëç';
                badgeClass = 'grade-good';
                message = '–ì–∞—Ä–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –Ñ –Ω–µ–≤–µ–ª–∏–∫—ñ –ø—Ä–æ–≥–∞–ª–∏–Ω–∏.';
            } else if (percentage >= 60) {
                grade = '–ó–∞–¥–æ–≤—ñ–ª—å–Ω–æ üìñ';
                badgeClass = 'grade-satisfactory';
                message = '–ó–∞–¥–æ–≤—ñ–ª—å–Ω–æ, –∞–ª–µ –≤–∞—Ä—Ç–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –¥–µ—è–∫—ñ —Ç–µ–º–∏.';
            } else {
                grade = '–ù–µ–∑–∞–¥–æ–≤—ñ–ª—å–Ω–æ üìö';
                badgeClass = 'grade-unsatisfactory';
                message = '–ü–æ—Ç—Ä—ñ–±–Ω–æ —Å–µ—Ä–π–æ–∑–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª.';
            }

            const badge = document.getElementById('grade-badge');
            badge.textContent = grade;
            badge.className = `grade-badge ${badgeClass}`;
            document.getElementById('result-message').textContent = message;

            // –î–µ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è
            const breakdown = document.getElementById('breakdown-content');
            breakdown.innerHTML = details.map(d => `
                <div class="breakdown-item">
                    <span>–ü–∏—Ç–∞–Ω–Ω—è ${d.id} (${d.type})</span>
                    <span class="breakdown-points">${d.score.toFixed(1)}/${d.max} –±</span>
                </div>
            `).join('');

            // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó
            saveHistory(displayScore, grade);
        }

        function saveHistory(score, grade) {
            const name = document.getElementById('student-name').value;
            const group = document.getElementById('student-group').value;
            const date = new Date().toLocaleString('uk-UA');
            
            const history = JSON.parse(localStorage.getItem('isi-quiz-history') || '[]');
            history.push({ name, group, score, grade, date });
            localStorage.setItem('isi-quiz-history', JSON.stringify(history.slice(-5))); // –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ 5

            // –ü–æ–∫–∞–∑ —ñ—Å—Ç–æ—Ä—ñ—ó
            if (history.length > 1) {
                document.getElementById('history-section').style.display = 'block';
                document.getElementById('history-content').innerHTML = history.slice(0, -1).reverse().map(h => `
                    <div style="padding: 8px 0; border-bottom: 1px solid var(--border); font-size: 0.9rem;">
                        ${h.date}: <strong>${h.score}/15</strong> ‚Äî ${h.grade}
                    </div>
                `).join('');
            }
        }

        // ==========================================
        // –ó–ê–ü–£–°–ö
        // ==========================================
        function startQuiz() {
            const name = document.getElementById('student-name').value.trim();
            const group = document.getElementById('student-group').value.trim();
            
            if (!name || !group) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å —É—Å—ñ –ø–æ–ª—è');
                return;
            }

            document.getElementById('login-card').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            
            renderQuestions();
            startTimer();
            updateProgress();
        }
    </script>
</body>
</html>