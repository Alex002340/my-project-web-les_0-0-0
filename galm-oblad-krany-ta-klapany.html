<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Інтерактивна інструкція: Гальмівне обладнання</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700&family=Roboto+Slab:wght@400;700&display=swap');

        :root {
            --font-headline: 'Roboto Condensed', sans-serif;
            --font-body: 'Roboto Slab', serif;
            --color-paper: #fdfaf0;
            --color-ink: #2c3e50;
            --color-header: #003366; /* Глибокий синій */
            --color-accent-red: #c0392b; /* Сигнальний червоний */
            --turn-duration: 1s; /* Тривалість анімації */
        }

        /* --- Базова структура --- */
        body {
            background-color: #555;
            font-family: var(--font-body);
            color: var(--color-ink);
            margin: 0;
            overflow: hidden;
        }

        .newspaper-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            perspective: 2000px;
        }

        /* --- Сторінки та їх анімації --- */
        .page {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--color-paper);
            padding: 2.5rem;
            box-sizing: border-box;
            overflow-y: auto;
            opacity: 0; pointer-events: none;
            backface-visibility: hidden;
            transform: rotateY(0deg);
            transition: transform var(--turn-duration) cubic-bezier(0.6, 0.02, 0.4, 1), 
                        opacity calc(var(--turn-duration) / 2) ease-in-out;
        }
        .page.active { opacity: 1; pointer-events: auto; z-index: 10; }
        .page.turning-next { opacity: 0; transform: rotateY(-120deg) scale(0.95); z-index: 11; }
        .page.turning-prev { opacity: 0; transform: rotateY(120deg) scale(0.95); z-index: 11; }

        /* --- Верстка сторінки --- */
        .masthead {
            text-align: center;
            border-bottom: 3px solid var(--color-header);
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
        }
        .masthead h1 {
            font-family: var(--font-headline);
            font-size: 2.5rem;
            color: var(--color-header);
            text-transform: uppercase;
            margin: 0;
        }
        .main-column {
            columns: 2;
            column-gap: 2.5rem;
            text-align: justify;
        }
        h2, h3 {
            column-span: all;
            font-family: var(--font-headline);
            color: var(--color-header);
            border-bottom: 1px solid #ccc;
            padding-bottom: 0.5rem;
        }
        h2 { font-size: 2rem; margin-top: 0; }
        h3 { font-size: 1.5rem; margin-top: 2rem; }
        p { margin-top: 0; line-height: 1.8; }
        .highlight {
            font-weight: 700;
            color: var(--color-accent-red);
        }
        .component {
            font-weight: 700;
            color: var(--color-header);
        }

        /* --- Ілюстрації --- */
        .media-wrapper {
            break-inside: avoid;
            margin: 1rem 0;
            padding: 0.5rem;
            border: 1px solid #ddd;
            background: #fff;
            cursor: zoom-in;
            transition: box-shadow 0.3s;
        }
        .media-wrapper:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .media-wrapper img {
            max-width: 100%;
            width: 100%;
            display: block;
        }
        .media-wrapper figcaption {
            font-size: 0.8rem;
            font-style: italic;
            text-align: center;
            padding: 0.5rem 0 0;
            cursor: default;
        }
        
        /* --- Lightbox --- */
        .lightbox {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
            cursor: zoom-out;
        }
        .lightbox.visible {
            opacity: 1;
            pointer-events: auto;
        }
        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            transform: scale(0.8);
            transition: transform 0.4s ease;
            background: white;
            padding: 10px;
            overflow: auto;
            cursor: default;
        }
        .lightbox.visible .lightbox-content {
            transform: scale(1);
        }
        .lightbox-content > * {
            max-width: none !important;
            max-height: none !important;
        }

        /* --- Навігація --- */
        .page-turner {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 101;
        }
        .turn-button {
            background: var(--color-header);
            color: var(--color-paper);
            font-family: var(--font-headline);
            padding: 0.8rem 2.5rem;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: 1rem;
            border-radius: 5px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .turn-button:disabled { background: #999; cursor: not-allowed; box-shadow: none; }

        /* --- Адаптивність --- */
        @media (max-width: 1024px) { .main-column { columns: 2; } }
        @media (max-width: 768px) { 
            .page { padding: 1.5rem; padding-bottom: 6rem; /* Збільшуємо відступ знизу для кнопок */ }
            .main-column { columns: 1; } 
            .masthead h1 { font-size: 1.8rem; } 
            h2 { font-size: 1.5rem; }

            /* --- НОВІ СТИЛІ ДЛЯ МОБІЛЬНИХ КНОПОК --- */
            .page-turner {
                bottom: 0;
                left: 0;
                right: 0;
                width: 100%;
                display: flex;
                justify-content: space-between;
                padding: 1rem;
                box-sizing: border-box;
            }
            .turn-button {
                flex: 1;
                margin: 0 0.5rem;
                padding: 1rem;
                font-size: 1rem;
                /* Напівпрозорий фон */
                background: rgba(0, 51, 102, 0.8); 
                backdrop-filter: blur(5px);
                border: 1px solid rgba(255,255,255,0.2);
            }
        }
    </style>
</head>
<body>

<div class="newspaper-container">

    <!-- СТОРІНКА 1 -->
    <div class="page active" id="page-1">
        <header class="masthead"><h1>Гальмівне обладнання: Крани та клапани</h1></header>
        <div class="main-column">
            <h2>Роз'єднувальний кран № 372</h2>
            <h3>Призначення</h3>
            <p>Роз'єднувальний кран (кран подвійної тяги) <span class="component">№ 372</span> – це важливий елемент пневматичної системи гальм рухомого складу. Його основна функція полягає у <span class="highlight">включенні та вимкненні розподільників повітря</span>. Завдяки цьому крану можна управляти гальмівною системою окремого вагона або групи вагонів.</p>
            <figure class="media-wrapper">
                <img src="https://i.postimg.cc/Nf08j5BR/re-463586.png" alt="Роз'єднувальний кран № 372">
                <figcaption>Мал.1 Роз'єднувальний кран № 372</figcaption>
            </figure>
            <h3>Принцип дії</h3>
            <p>Кран № 372 має два положення ручки: <span class="highlight">уздовж осі труби – кран відкритий</span> (прилад увімкнено), <span class="highlight">поперек труби – кран закритий</span> (прилад вимкнено). У пробці крана отвір «а» діаметром 4 мм служить для повідомлення розподільника повітря з атмосферою в закритому положенні ручки крана. Це зроблено для попередження самогальмування вимкненого розподільника повітря у разі пропуску роз'єднувального крана.</p>
            <p>Роз'єднувальний кран з атмосферним отвором дозволяє проводити гальмування одного вагона при обробці складу. При вимиканні вагона після перекриття крана треба випустити повітря з камер і запасного резервуара.</p>
        </div>
    </div>

    <!-- СТОРІНКА 2 -->
    <div class="page" id="page-2">
        <header class="masthead"><h1>Гальмівне обладнання: Крани та клапани</h1></header>
        <div class="main-column">
            <h2>Клапани максимального тиску</h2>
            <p>Клапани максимального тиску призначені для <span class="highlight">обмеження тиску повітря</span>, що надходить із головного резервуара в гальмівні циліндри.</p>
            <h3>Клапан № 3МД</h3>
            <p>Складається з корпусу, клапана, склянки, поршня, регулювальної пружини та гвинта. Під дією пружини поршень займає крайнє верхнє положення і віджимає клапан від сідла. Повітря з ГР надходить у гальмівний циліндр (ТЦ). Одночасно воно потрапляє в камеру «а» над поршнем. Як тільки тиск на поршень стане більшим за зусилля пружини, він опуститься, і клапан сяде на сідло, припинивши подачу повітря.</p>
            <h3>Клапан № 3МДА</h3>
            <p>При великих обсягах ТЦ, тиск у камері над поршнем клапана 3МД підвищується швидше, ніж наповнюються циліндри, що сповільнює гальмування. Для усунення цього недоліку застосовують клапан <span class="component">№ 3МДА</span>, у якого камера над поршнем з'єднана зі зворотною трубою від ТЦ. У цьому випадку клапан утримується у відкритому положенні доти, доки не наповняться гальмівні циліндри.</p>
            <h3>Комбінований кран № 114</h3>
            <p>Кран складається з корпусу, триходової пробки та пружини. Він забезпечує:</p>
            <ul>
                <li>При рукоятці уздовж осі: зв'язок крана машиніста з гальмівною магістраллю.</li>
                <li>У правому положенні: повідомлення гальмівної магістралі з атмосферою (екстрене гальмування).</li>
                <li>У лівому положенні: роз'єднання крана машиніста з магістраллю.</li>
            </ul>
             <figure class="media-wrapper">
                <img src="https://i.postimg.cc/k57g7tdM/AA-48765.jpg" alt="Комбінований кран № 114">
                <figcaption>Комбінований кран № 114.</figcaption>
            </figure>
        </div>
    </div>

    <!-- СТОРІНКА 3 -->
    <div class="page" id="page-3">
        <header class="masthead"><h1>Гальмівне обладнання: Крани та клапани</h1></header>
        <div class="main-column">
            <h2>Пристрій блокування №367 м</h2>
            <h3>Призначення</h3>
            <p>Блокувальний пристрій (БП) <span class="component">№ 367</span> призначений для дотримання <span class="highlight">певного порядку зміни приладів керування гальмами</span> двокабінних локомотивів при зміні напрямку руху. Через однакові БП до поїзних та допоміжних кранів машиніста в обох кабінах підводяться магістралі.</p>
            <figure class="media-wrapper">
                <img src="https://i.postimg.cc/T1sKw2JQ/ra-456784.jpg" alt="Пристрій блокування №367 м">
                <figcaption>Пристрій блокування гальм №367 м.</figcaption>
            </figure>
            <h3>Принцип дії</h3>
            <p>При зміні кабіни керування необхідно загальмувати локомотив і розрядити гальмівну магістраль. Внаслідок цього <span class="component">пневматичні замки (1)</span> вийдуть із пазів і розблокують вали (2).</p>
            <p>Поворотом <span class="component">знімної рукоятки (3)</span> на 180º з нижнього у верхнє положення, забезпечується відключення клапанами кранів машиніста від магістралей і вимикання електричного контакту (7), що <span class="highlight">виключає управління тягою</span> з покинутої кабіни.</p>
            <p>Після цього рукоятка переноситься в іншу кабіну, де у зворотному порядку друге БП наводиться в робоче положення. Після відпуску гальм і підвищення тиску в магістралі, пневматичні замки в обох кабінах блокують вали.</p>
            <h3>Комбінований кран пристрою блокування</h3>
            <p>Комбінований кран БО складається з корпусу 2, триходової пробки 3 та пружини 4, поміщеної у кришці 5. Він аналогічний крану № 114 і забезпечує при розташованій уздовж осі рукоятці зв'язок КМ з ТМ, у правому положенні рукоятки повідомляє ТМ з атмосферою, створюючи екстрене гальмування, а в лівому роз'єднує КМ з ТМ.</p>
        </div>
    </div>

</div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
    <div class="lightbox-content"></div>
</div>

<!-- Навігація -->
<nav class="page-turner">
    <button class="turn-button" id="prev-page">Попередня</button>
    <button class="turn-button" id="next-page">Наступна</button>
</nav>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const pages = document.querySelectorAll('.page');
    const prevButton = document.getElementById('prev-page');
    const nextButton = document.getElementById('next-page');
    const lightbox = document.getElementById('lightbox');
    const lightboxContent = lightbox.querySelector('.lightbox-content');
    
    let currentPageIndex = 0;
    const totalPages = pages.length;
    let isTurning = false;

    function updateButtons() {
        prevButton.disabled = currentPageIndex === 0;
        nextButton.disabled = currentPageIndex === totalPages - 1;
    }

    function turnPage(direction) {
        if (isTurning) return;
        const newIndex = (direction === 'next') ? currentPageIndex + 1 : currentPageIndex - 1;
        if (newIndex < 0 || newIndex >= totalPages) return;

        isTurning = true;
        prevButton.disabled = true;
        nextButton.disabled = true;

        const outgoingPage = pages[currentPageIndex];
        const incomingPage = pages[newIndex];
        
        outgoingPage.style.transformOrigin = (direction === 'next') ? 'right center' : 'left center';
        outgoingPage.classList.add((direction === 'next') ? 'turning-next' : 'turning-prev');
        
        incomingPage.classList.add('active');
        currentPageIndex = newIndex;
        
        const turnDuration = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--turn-duration')) * 1000;
        
        setTimeout(() => {
            outgoingPage.classList.remove('active', 'turning-next', 'turning-prev');
            updateButtons();
            isTurning = false;
        }, turnDuration);
    }

    nextButton.addEventListener('click', () => turnPage('next'));
    prevButton.addEventListener('click', () => turnPage('prev'));

    function setupLightboxForPage(page) {
        page.querySelectorAll('.media-wrapper').forEach(item => {
            item.addEventListener('click', () => {
                const mediaContentElement = item.querySelector('img, table');
                if (mediaContentElement) {
                    lightboxContent.innerHTML = '';
                    lightboxContent.appendChild(mediaContentElement.cloneNode(true));
                    lightbox.classList.add('visible');
                }
            });
        });
    }

    pages.forEach(setupLightboxForPage);

    lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) {
            lightbox.classList.remove('visible');
        }
    });

    updateButtons();
});
</script>

</body>
</html>